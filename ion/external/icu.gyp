#
# Copyright 2017 Google Inc. All Rights Reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS-IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
{
  'includes': [
    '../common.gypi',
  ],
  'variables': {
    'icu_src_dir': '<(root_dir)/third_party/icu/icu4c',
  },
  'targets': [
    {
      'target_name': 'ionicu',
      'type': 'static_library',
      'all_dependent_settings': {
        'include_dirs': [
          '<(icu_src_dir)/source/common',
        ],
        'defines': [
          'U_DISABLE_RENAMING',
          'NO_GOOGLE_STRING_PIECE_IN_ICU',
        ],
      },  # all_dependent_settings
      'include_dirs': [
        '<(root_dir)/',
        '<(icu_src_dir)/source/common',
      ],
      'cflags_cc': [
        '-Wno-deprecated-declarations',
        '-Wno-unused-function',
      ],
      'cflags_cc!': [
        '-Wconversion',
      ],
      'defines': [
        'U_DISABLE_RENAMING',
        'U_COMMON_IMPLEMENTATION',
        'U_STATIC_IMPLEMENTATION',
        'U_IMPORT=',
        'U_EXPORT=',
        'GOOGLE_VENDOR_SRC_BRANCH',
      ],
      'msvs_disabled_warnings': [
        '4005', # Macro redefinition. ICU headers define WIN32_LEAN_AND_MEAN.
        '4018', # Signed/unsigned mismatch in comparisons.
        '4091', # Signed/unsigned mismatch in comparisons.
        '4229', # Modifiers on data are ignored
        '4244', # Conversion from 64-bit to 32-bit types.
        '4267', # Conversion from 64-bit to 32-bit types.
        '4333', # Right shift by too large amount, data loss.
        '4554', # & operator precedence.
        '4595', # Non-member new/delete inline.
        '4996', # 'uidna_toASCII': was declared deprecated.
      ],
      'sources': [
        # To generate this list cd into third_party/icu and run:
        # ls -1 source/common/*.{c{,pp},h} 2>/dev/null|sed "sI\(.*\)I        '<(icu_src_dir)/\1',I"|LC_ALL=C sort
        '<(icu_src_dir)/source/common/appendable.cpp',
        '<(icu_src_dir)/source/common/bmpset.cpp',
        '<(icu_src_dir)/source/common/bmpset.h',
        '<(icu_src_dir)/source/common/brkeng.cpp',
        '<(icu_src_dir)/source/common/brkeng.h',
        '<(icu_src_dir)/source/common/brkiter.cpp',
        '<(icu_src_dir)/source/common/bytesinkutil.cpp',
        '<(icu_src_dir)/source/common/bytesinkutil.h',
        '<(icu_src_dir)/source/common/bytestream.cpp',
        '<(icu_src_dir)/source/common/bytestrie.cpp',
        '<(icu_src_dir)/source/common/bytestriebuilder.cpp',
        '<(icu_src_dir)/source/common/bytestrieiterator.cpp',
        '<(icu_src_dir)/source/common/caniter.cpp',
        '<(icu_src_dir)/source/common/chariter.cpp',
        '<(icu_src_dir)/source/common/charstr.cpp',
        '<(icu_src_dir)/source/common/charstr.h',
        '<(icu_src_dir)/source/common/cmemory.cpp',
        '<(icu_src_dir)/source/common/cmemory.h',
        '<(icu_src_dir)/source/common/cpputils.h',
        '<(icu_src_dir)/source/common/cstr.cpp',
        '<(icu_src_dir)/source/common/cstr.h',
        '<(icu_src_dir)/source/common/cstring.cpp',
        '<(icu_src_dir)/source/common/cstring.h',
        '<(icu_src_dir)/source/common/cwchar.cpp',
        '<(icu_src_dir)/source/common/cwchar.h',
        '<(icu_src_dir)/source/common/dictbe.cpp',
        '<(icu_src_dir)/source/common/dictbe.h',
        '<(icu_src_dir)/source/common/dictionarydata.cpp',
        '<(icu_src_dir)/source/common/dictionarydata.h',
        '<(icu_src_dir)/source/common/dtintrv.cpp',
        '<(icu_src_dir)/source/common/edits.cpp',
        '<(icu_src_dir)/source/common/errorcode.cpp',
        '<(icu_src_dir)/source/common/filteredbrk.cpp',
        '<(icu_src_dir)/source/common/filterednormalizer2.cpp',
        '<(icu_src_dir)/source/common/hash.h',
        '<(icu_src_dir)/source/common/icudataver.cpp',
        '<(icu_src_dir)/source/common/icuplug.cpp',
        '<(icu_src_dir)/source/common/icuplugimp.h',
        '<(icu_src_dir)/source/common/listformatter.cpp',
        '<(icu_src_dir)/source/common/loadednormalizer2impl.cpp',
        '<(icu_src_dir)/source/common/localsvc.h',
        '<(icu_src_dir)/source/common/locavailable.cpp',
        '<(icu_src_dir)/source/common/locbased.cpp',
        '<(icu_src_dir)/source/common/locbased.h',
        '<(icu_src_dir)/source/common/locdispnames.cpp',
        '<(icu_src_dir)/source/common/locdspnm.cpp',
        '<(icu_src_dir)/source/common/locid.cpp',
        '<(icu_src_dir)/source/common/loclikely.cpp',
        '<(icu_src_dir)/source/common/locmap.cpp',
        '<(icu_src_dir)/source/common/locmap.h',
        '<(icu_src_dir)/source/common/locresdata.cpp',
        '<(icu_src_dir)/source/common/locutil.cpp',
        '<(icu_src_dir)/source/common/locutil.h',
        '<(icu_src_dir)/source/common/messageimpl.h',
        '<(icu_src_dir)/source/common/messagepattern.cpp',
        '<(icu_src_dir)/source/common/msvcres.h',
        '<(icu_src_dir)/source/common/mutex.h',
        '<(icu_src_dir)/source/common/norm2_nfc_data.h',
        '<(icu_src_dir)/source/common/norm2allmodes.h',
        '<(icu_src_dir)/source/common/normalizer2.cpp',
        '<(icu_src_dir)/source/common/normalizer2impl.cpp',
        '<(icu_src_dir)/source/common/normalizer2impl.h',
        '<(icu_src_dir)/source/common/normlzr.cpp',
        '<(icu_src_dir)/source/common/parsepos.cpp',
        '<(icu_src_dir)/source/common/patternprops.cpp',
        '<(icu_src_dir)/source/common/patternprops.h',
        '<(icu_src_dir)/source/common/pluralmap.cpp',
        '<(icu_src_dir)/source/common/pluralmap.h',
        '<(icu_src_dir)/source/common/propname.cpp',
        '<(icu_src_dir)/source/common/propname.h',
        '<(icu_src_dir)/source/common/propname_data.h',
        '<(icu_src_dir)/source/common/propsvec.cpp',
        '<(icu_src_dir)/source/common/propsvec.h',
        '<(icu_src_dir)/source/common/punycode.cpp',
        '<(icu_src_dir)/source/common/punycode.h',
        '<(icu_src_dir)/source/common/putil.cpp',
        '<(icu_src_dir)/source/common/putilimp.h',
        '<(icu_src_dir)/source/common/rbbi.cpp',
        '<(icu_src_dir)/source/common/rbbi_cache.cpp',
        '<(icu_src_dir)/source/common/rbbi_cache.h',
        '<(icu_src_dir)/source/common/rbbidata.cpp',
        '<(icu_src_dir)/source/common/rbbidata.h',
        '<(icu_src_dir)/source/common/rbbinode.cpp',
        '<(icu_src_dir)/source/common/rbbinode.h',
        '<(icu_src_dir)/source/common/rbbirb.cpp',
        '<(icu_src_dir)/source/common/rbbirb.h',
        '<(icu_src_dir)/source/common/rbbirpt.h',
        '<(icu_src_dir)/source/common/rbbiscan.cpp',
        '<(icu_src_dir)/source/common/rbbiscan.h',
        '<(icu_src_dir)/source/common/rbbisetb.cpp',
        '<(icu_src_dir)/source/common/rbbisetb.h',
        '<(icu_src_dir)/source/common/rbbistbl.cpp',
        '<(icu_src_dir)/source/common/rbbitblb.cpp',
        '<(icu_src_dir)/source/common/rbbitblb.h',
        '<(icu_src_dir)/source/common/resbund.cpp',
        '<(icu_src_dir)/source/common/resbund_cnv.cpp',
        '<(icu_src_dir)/source/common/resource.cpp',
        '<(icu_src_dir)/source/common/resource.h',
        '<(icu_src_dir)/source/common/ruleiter.cpp',
        '<(icu_src_dir)/source/common/ruleiter.h',
        '<(icu_src_dir)/source/common/schriter.cpp',
        '<(icu_src_dir)/source/common/serv.cpp',
        '<(icu_src_dir)/source/common/serv.h',
        '<(icu_src_dir)/source/common/servlk.cpp',
        '<(icu_src_dir)/source/common/servlkf.cpp',
        '<(icu_src_dir)/source/common/servloc.h',
        '<(icu_src_dir)/source/common/servls.cpp',
        '<(icu_src_dir)/source/common/servnotf.cpp',
        '<(icu_src_dir)/source/common/servnotf.h',
        '<(icu_src_dir)/source/common/servrbf.cpp',
        '<(icu_src_dir)/source/common/servslkf.cpp',
        '<(icu_src_dir)/source/common/sharedobject.cpp',
        '<(icu_src_dir)/source/common/sharedobject.h',
        '<(icu_src_dir)/source/common/simpleformatter.cpp',
        '<(icu_src_dir)/source/common/sprpimpl.h',
        '<(icu_src_dir)/source/common/stringpiece.cpp',
        '<(icu_src_dir)/source/common/stringtriebuilder.cpp',
        '<(icu_src_dir)/source/stubdata/stubdata.cpp',
        '<(icu_src_dir)/source/common/uarrsort.cpp',
        '<(icu_src_dir)/source/common/uarrsort.h',
        '<(icu_src_dir)/source/common/uassert.h',
        '<(icu_src_dir)/source/common/ubidi.cpp',
        '<(icu_src_dir)/source/common/ubidi_props.cpp',
        '<(icu_src_dir)/source/common/ubidi_props.h',
        '<(icu_src_dir)/source/common/ubidi_props_data.h',
        '<(icu_src_dir)/source/common/ubidiimp.h',
        '<(icu_src_dir)/source/common/ubidiln.cpp',
        '<(icu_src_dir)/source/common/ubiditransform.cpp',
        '<(icu_src_dir)/source/common/ubidiwrt.cpp',
        '<(icu_src_dir)/source/common/ubrk.cpp',
        '<(icu_src_dir)/source/common/ubrkimpl.h',
        '<(icu_src_dir)/source/common/ucase.cpp',
        '<(icu_src_dir)/source/common/ucase.h',
        '<(icu_src_dir)/source/common/ucase_props_data.h',
        '<(icu_src_dir)/source/common/ucasemap.cpp',
        '<(icu_src_dir)/source/common/ucasemap_imp.h',
        '<(icu_src_dir)/source/common/ucasemap_titlecase_brkiter.cpp',
        '<(icu_src_dir)/source/common/ucat.cpp',
        '<(icu_src_dir)/source/common/uchar.cpp',
        '<(icu_src_dir)/source/common/uchar_props_data.h',
        '<(icu_src_dir)/source/common/ucharstrie.cpp',
        '<(icu_src_dir)/source/common/ucharstriebuilder.cpp',
        '<(icu_src_dir)/source/common/ucharstrieiterator.cpp',
        '<(icu_src_dir)/source/common/uchriter.cpp',
        '<(icu_src_dir)/source/common/ucln.h',
        '<(icu_src_dir)/source/common/ucln_cmn.cpp',
        '<(icu_src_dir)/source/common/ucln_cmn.h',
        '<(icu_src_dir)/source/common/ucln_imp.h',
        '<(icu_src_dir)/source/common/ucmndata.cpp',
        '<(icu_src_dir)/source/common/ucmndata.h',
        '<(icu_src_dir)/source/common/ucnv.cpp',
        '<(icu_src_dir)/source/common/ucnv2022.cpp',
        '<(icu_src_dir)/source/common/ucnv_bld.cpp',
        '<(icu_src_dir)/source/common/ucnv_bld.h',
        '<(icu_src_dir)/source/common/ucnv_cb.cpp',
        '<(icu_src_dir)/source/common/ucnv_cnv.cpp',
        '<(icu_src_dir)/source/common/ucnv_cnv.h',
        '<(icu_src_dir)/source/common/ucnv_ct.cpp',
        '<(icu_src_dir)/source/common/ucnv_err.cpp',
        '<(icu_src_dir)/source/common/ucnv_ext.cpp',
        '<(icu_src_dir)/source/common/ucnv_ext.h',
        '<(icu_src_dir)/source/common/ucnv_imp.h',
        '<(icu_src_dir)/source/common/ucnv_io.cpp',
        '<(icu_src_dir)/source/common/ucnv_io.h',
        '<(icu_src_dir)/source/common/ucnv_lmb.cpp',
        '<(icu_src_dir)/source/common/ucnv_set.cpp',
        '<(icu_src_dir)/source/common/ucnv_u16.cpp',
        '<(icu_src_dir)/source/common/ucnv_u32.cpp',
        '<(icu_src_dir)/source/common/ucnv_u7.cpp',
        '<(icu_src_dir)/source/common/ucnv_u8.cpp',
        '<(icu_src_dir)/source/common/ucnvbocu.cpp',
        '<(icu_src_dir)/source/common/ucnvdisp.cpp',
        '<(icu_src_dir)/source/common/ucnvhz.cpp',
        '<(icu_src_dir)/source/common/ucnvisci.cpp',
        '<(icu_src_dir)/source/common/ucnvlat1.cpp',
        '<(icu_src_dir)/source/common/ucnvmbcs.cpp',
        '<(icu_src_dir)/source/common/ucnvmbcs.h',
        '<(icu_src_dir)/source/common/ucnvscsu.cpp',
        '<(icu_src_dir)/source/common/ucnvsel.cpp',
        '<(icu_src_dir)/source/common/ucol_data.h',
        '<(icu_src_dir)/source/common/ucol_swp.cpp',
        '<(icu_src_dir)/source/common/ucol_swp.h',
        '<(icu_src_dir)/source/common/ucurr.cpp',
        '<(icu_src_dir)/source/common/ucurrimp.h',
        '<(icu_src_dir)/source/common/udata.cpp',
        '<(icu_src_dir)/source/common/udatamem.cpp',
        '<(icu_src_dir)/source/common/udatamem.h',
        '<(icu_src_dir)/source/common/udataswp.cpp',
        '<(icu_src_dir)/source/common/udataswp.h',
        '<(icu_src_dir)/source/common/uelement.h',
        '<(icu_src_dir)/source/common/uenum.cpp',
        '<(icu_src_dir)/source/common/uenumimp.h',
        '<(icu_src_dir)/source/common/uhash.cpp',
        '<(icu_src_dir)/source/common/uhash.h',
        '<(icu_src_dir)/source/common/uhash_us.cpp',
        '<(icu_src_dir)/source/common/uidna.cpp',
        '<(icu_src_dir)/source/common/uinit.cpp',
        '<(icu_src_dir)/source/common/uinvchar.cpp',
        '<(icu_src_dir)/source/common/uinvchar.h',
        '<(icu_src_dir)/source/common/uiter.cpp',
        '<(icu_src_dir)/source/common/ulist.cpp',
        '<(icu_src_dir)/source/common/ulist.h',
        '<(icu_src_dir)/source/common/ulistformatter.cpp',
        '<(icu_src_dir)/source/common/uloc.cpp',
        '<(icu_src_dir)/source/common/uloc_keytype.cpp',
        '<(icu_src_dir)/source/common/uloc_tag.cpp',
        '<(icu_src_dir)/source/common/ulocimp.h',
        '<(icu_src_dir)/source/common/umapfile.cpp',
        '<(icu_src_dir)/source/common/umapfile.h',
        '<(icu_src_dir)/source/common/umath.cpp',
        '<(icu_src_dir)/source/common/umutex.cpp',
        '<(icu_src_dir)/source/common/umutex.h',
        '<(icu_src_dir)/source/common/unames.cpp',
        '<(icu_src_dir)/source/common/unifiedcache.cpp',
        '<(icu_src_dir)/source/common/unifiedcache.h',
        '<(icu_src_dir)/source/common/unifilt.cpp',
        '<(icu_src_dir)/source/common/unifunct.cpp',
        '<(icu_src_dir)/source/common/uniset.cpp',
        '<(icu_src_dir)/source/common/uniset_closure.cpp',
        '<(icu_src_dir)/source/common/uniset_props.cpp',
        '<(icu_src_dir)/source/common/unisetspan.cpp',
        '<(icu_src_dir)/source/common/unisetspan.h',
        '<(icu_src_dir)/source/common/unistr.cpp',
        '<(icu_src_dir)/source/common/unistr_case.cpp',
        '<(icu_src_dir)/source/common/unistr_case_locale.cpp',
        '<(icu_src_dir)/source/common/unistr_cnv.cpp',
        '<(icu_src_dir)/source/common/unistr_props.cpp',
        '<(icu_src_dir)/source/common/unistr_titlecase_brkiter.cpp',
        '<(icu_src_dir)/source/common/unistrappender.h',
        '<(icu_src_dir)/source/common/unorm.cpp',
        '<(icu_src_dir)/source/common/unormcmp.cpp',
        '<(icu_src_dir)/source/common/unormimp.h',
        '<(icu_src_dir)/source/common/uobject.cpp',
        '<(icu_src_dir)/source/common/uposixdefs.h',
        '<(icu_src_dir)/source/common/uprops.cpp',
        '<(icu_src_dir)/source/common/uprops.h',
        '<(icu_src_dir)/source/common/ures_cnv.cpp',
        '<(icu_src_dir)/source/common/uresbund.cpp',
        '<(icu_src_dir)/source/common/uresdata.cpp',
        '<(icu_src_dir)/source/common/uresdata.h',
        '<(icu_src_dir)/source/common/uresimp.h',
        '<(icu_src_dir)/source/common/ureslocs.h',
        '<(icu_src_dir)/source/common/usc_impl.cpp',
        '<(icu_src_dir)/source/common/usc_impl.h',
        '<(icu_src_dir)/source/common/uscript.cpp',
        '<(icu_src_dir)/source/common/uscript_props.cpp',
        '<(icu_src_dir)/source/common/uset.cpp',
        '<(icu_src_dir)/source/common/uset_imp.h',
        '<(icu_src_dir)/source/common/uset_props.cpp',
        '<(icu_src_dir)/source/common/usetiter.cpp',
        '<(icu_src_dir)/source/common/ushape.cpp',
        '<(icu_src_dir)/source/common/usprep.cpp',
        '<(icu_src_dir)/source/common/ustack.cpp',
        '<(icu_src_dir)/source/common/ustr_cnv.cpp',
        '<(icu_src_dir)/source/common/ustr_cnv.h',
        '<(icu_src_dir)/source/common/ustr_imp.h',
        '<(icu_src_dir)/source/common/ustr_titlecase_brkiter.cpp',
        '<(icu_src_dir)/source/common/ustr_wcs.cpp',
        '<(icu_src_dir)/source/common/ustrcase.cpp',
        '<(icu_src_dir)/source/common/ustrcase_locale.cpp',
        '<(icu_src_dir)/source/common/ustrenum.cpp',
        '<(icu_src_dir)/source/common/ustrenum.h',
        '<(icu_src_dir)/source/common/ustrfmt.cpp',
        '<(icu_src_dir)/source/common/ustrfmt.h',
        '<(icu_src_dir)/source/common/ustring.cpp',
        '<(icu_src_dir)/source/common/ustrtrns.cpp',
        '<(icu_src_dir)/source/common/utext.cpp',
        '<(icu_src_dir)/source/common/utf_impl.cpp',
        '<(icu_src_dir)/source/common/util.cpp',
        '<(icu_src_dir)/source/common/util.h',
        '<(icu_src_dir)/source/common/util_props.cpp',
        '<(icu_src_dir)/source/common/utrace.cpp',
        '<(icu_src_dir)/source/common/utracimp.h',
        '<(icu_src_dir)/source/common/utrie.cpp',
        '<(icu_src_dir)/source/common/utrie.h',
        '<(icu_src_dir)/source/common/utrie2.cpp',
        '<(icu_src_dir)/source/common/utrie2.h',
        '<(icu_src_dir)/source/common/utrie2_builder.cpp',
        '<(icu_src_dir)/source/common/utrie2_impl.h',
        '<(icu_src_dir)/source/common/uts46.cpp',
        '<(icu_src_dir)/source/common/utypeinfo.h',
        '<(icu_src_dir)/source/common/utypes.cpp',
        '<(icu_src_dir)/source/common/uvector.cpp',
        '<(icu_src_dir)/source/common/uvector.h',
        '<(icu_src_dir)/source/common/uvectr32.cpp',
        '<(icu_src_dir)/source/common/uvectr32.h',
        '<(icu_src_dir)/source/common/uvectr64.cpp',
        '<(icu_src_dir)/source/common/uvectr64.h',
        '<(icu_src_dir)/source/common/wintz.cpp',
        '<(icu_src_dir)/source/common/wintz.h',
      ],  # sources
      'conditions': [
        ['OS == "win"', {
          'link_settings': {
            'libraries': [
              '-ladvapi32',
            ],
          },
        }],
      ],
    },  # target: ionicu
  ],  # targets
}
